import{A as n,D as l,Ka as c,La as m,i as h,j as i,r as u,vb as g,wb as d}from"./chunk-WMTPMO6I.js";var S=(()=>{class r{constructor(){}setItem(t,e){t=="token"?sessionStorage.setItem(t,e):localStorage.setItem(t,e)}getItem(t){return t=="token"&&sessionStorage?.getItem(t)?sessionStorage.getItem(t):localStorage.getItem(t)}clear(){localStorage.clear(),sessionStorage.clear()}removeItem(t){t=="token"&&sessionStorage.removeItem(t),localStorage.removeItem(t)}handleLogoutAndLogin(){!sessionStorage.getItem("clearSessionStorageTime")&&localStorage.getItem("clearLocalStorageTime")&&sessionStorage.setItem("clearSessionStorageTime",""+new Date().getTime()),sessionStorage.getItem("clearSessionStorageTime")&&!localStorage.getItem("clearLocalStorageTime")&&(sessionStorage.clear(),window.location.reload())}static{this.\u0275fac=function(e){return new(e||r)}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var I=(()=>{class r{constructor(t){this.toastr=t}success(t,e="Success"){this.toastr.success(t,e)}error(t,e="Error"){this.toastr.error(t,e)}info(t,e="Info"){this.toastr.info(t,e)}warning(t,e="Warning"){this.toastr.warning(t,e)}static{this.\u0275fac=function(e){return new(e||r)(l(d))}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var k=(()=>{class r{constructor(t,e,s){this.http=t,this.customStorageService=e,this.toasterService=s,this.hostUrl=g.apiUrl,this.requestInterceptMap={}}getTasks(){let t=`${this.hostUrl}/task`;return this.getQuery(t)}getTaskById(t){let e=`${this.hostUrl}/${t}`;return this.getQuery(e)}createTask(t){var e=`${this.hostUrl}/task`;return this.postQuery(e,t)}updateTask(t,e){var s=`${this.hostUrl}/task/${e}`;return this.putQuery(s,t)}deleteTask(t){var e=`${this.hostUrl}/task/${t}`;return this.deleteQuery(e)}userLogin(t){let e=new c().set("Content-Type","application/json");return this.http.post(`${this.hostUrl}/user/login`,JSON.stringify(t),{headers:e,withCredentials:!0,observe:"response"}).pipe(i(s=>(localStorage.setItem("clearLocalStorageTime",""+new Date().getTime()),sessionStorage.setItem("clearSessionStorageTime",""+new Date().getTime()),{result:s.body,status:s.status})))}createUser(t,e,s){var o=`${this.hostUrl}/user/signup`,a={};return a.name=t,a.email=e,a.password=s,this.postQuery(o,a)}deleteQuery(t,e=!0){let s=new c({"Content-Type":"application/json"});return this.http.delete(t,{headers:s,withCredentials:!0,observe:"response"}).pipe(i(o=>({result:o.body,status:o.status})),u(o=>this.handleError(o,e)))}postQuery(t,e,s=!0,o=void 0){let a=new c().set("Content-Type",o||"application/json");return this.http.post(t,JSON.stringify(e),{headers:a,withCredentials:!0,observe:"response"}).pipe(i(p=>({result:p.body,status:p.status})),u(p=>this.handleError(p,s)))}putQuery(t,e,s=!0){let o=new c({"Content-Type":"application/json"});return this.http.put(t,JSON.stringify(e),{headers:o,withCredentials:!0,observe:"response"}).pipe(i(a=>({result:a.body,status:a.status})),u(a=>this.handleError(a,s)))}getQuery(t,e=!0){let s=new c({"Content-Type":"application/json"});return this.http.get(t,{headers:s,withCredentials:!0,observe:"response"}).pipe(i(o=>({result:o.body,status:o.status})),u(o=>this.handleError(o,e)))}handleError(t,e=!0){return h(()=>({res:t?.status&&e?this.toasterService.error(t?.error?.data.details):null,status:t.status,message:t?.error?.message,error:t?.error}))}static{this.\u0275fac=function(e){return new(e||r)(l(m),l(S),l(I))}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{S as a,I as b,k as c};
